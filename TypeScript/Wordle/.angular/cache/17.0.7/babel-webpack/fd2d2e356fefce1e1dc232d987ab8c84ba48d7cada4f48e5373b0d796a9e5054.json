{"ast":null,"code":"/* eslint no-var: off */\n\n/**\n * This file is responsible for building the DOM and updating DOM state.\n *\n * @author Tim Scanlin\n */\n\nmodule.exports = function (options) {\n  var forEach = [].forEach;\n  var some = [].some;\n  var body = document.body;\n  var tocElement;\n  var currentlyHighlighting = true;\n  var SPACE_CHAR = ' ';\n\n  /**\n   * Create link and list elements.\n   * @param {Object} d\n   * @param {HTMLElement} container\n   * @return {HTMLElement}\n   */\n  function createEl(d, container) {\n    var link = container.appendChild(createLink(d));\n    if (d.children.length) {\n      var list = createList(d.isCollapsed);\n      d.children.forEach(function (child) {\n        createEl(child, list);\n      });\n      link.appendChild(list);\n    }\n  }\n\n  /**\n   * Render nested heading array data into a given element.\n   * @param {HTMLElement} parent Optional. If provided updates the {@see tocElement} to match.\n   * @param {Array} data\n   * @return {HTMLElement}\n   */\n  function render(parent, data) {\n    var collapsed = false;\n    var container = createList(collapsed);\n    data.forEach(function (d) {\n      createEl(d, container);\n    });\n\n    // Return if no TOC element is provided or known.\n    tocElement = parent || tocElement;\n    if (tocElement === null) {\n      return;\n    }\n\n    // Remove existing child if it exists.\n    if (tocElement.firstChild) {\n      tocElement.removeChild(tocElement.firstChild);\n    }\n\n    // Just return the parent and don't append the list if no links are found.\n    if (data.length === 0) {\n      return tocElement;\n    }\n\n    // Append the Elements that have been created\n    return tocElement.appendChild(container);\n  }\n\n  /**\n   * Create link element.\n   * @param {Object} data\n   * @return {HTMLElement}\n   */\n  function createLink(data) {\n    var item = document.createElement('li');\n    var a = document.createElement('a');\n    if (options.listItemClass) {\n      item.setAttribute('class', options.listItemClass);\n    }\n    if (options.onClick) {\n      a.onclick = options.onClick;\n    }\n    if (options.includeTitleTags) {\n      a.setAttribute('title', data.textContent);\n    }\n    if (options.includeHtml && data.childNodes.length) {\n      forEach.call(data.childNodes, function (node) {\n        a.appendChild(node.cloneNode(true));\n      });\n    } else {\n      // Default behavior. Set to textContent to keep tests happy.\n      a.textContent = data.textContent;\n    }\n    a.setAttribute('href', options.basePath + '#' + data.id);\n    a.setAttribute('class', options.linkClass + SPACE_CHAR + 'node-name--' + data.nodeName + SPACE_CHAR + options.extraLinkClasses);\n    item.appendChild(a);\n    return item;\n  }\n\n  /**\n   * Create list element.\n   * @param {Boolean} isCollapsed\n   * @return {HTMLElement}\n   */\n  function createList(isCollapsed) {\n    var listElement = options.orderedList ? 'ol' : 'ul';\n    var list = document.createElement(listElement);\n    var classes = options.listClass + SPACE_CHAR + options.extraListClasses;\n    if (isCollapsed) {\n      // No plus/equals here fixes compilcation issue.\n      classes = classes + SPACE_CHAR + options.collapsibleClass;\n      classes = classes + SPACE_CHAR + options.isCollapsedClass;\n    }\n    list.setAttribute('class', classes);\n    return list;\n  }\n\n  /**\n   * Update fixed sidebar class.\n   * @return {HTMLElement}\n   */\n  function updateFixedSidebarClass() {\n    if (options.scrollContainer && document.querySelector(options.scrollContainer)) {\n      var top;\n      top = document.querySelector(options.scrollContainer).scrollTop;\n    } else {\n      top = document.documentElement.scrollTop || body.scrollTop;\n    }\n    var posFixedEl = document.querySelector(options.positionFixedSelector);\n    if (options.fixedSidebarOffset === 'auto') {\n      options.fixedSidebarOffset = tocElement.offsetTop;\n    }\n    if (top > options.fixedSidebarOffset) {\n      if (posFixedEl.className.indexOf(options.positionFixedClass) === -1) {\n        posFixedEl.className += SPACE_CHAR + options.positionFixedClass;\n      }\n    } else {\n      posFixedEl.className = posFixedEl.className.replace(SPACE_CHAR + options.positionFixedClass, '');\n    }\n  }\n\n  /**\n   * Get top position of heading\n   * @param {HTMLElement} obj\n   * @return {int} position\n   */\n  function getHeadingTopPos(obj) {\n    var position = 0;\n    if (obj !== null) {\n      position = obj.offsetTop;\n      if (options.hasInnerContainers) {\n        position += getHeadingTopPos(obj.offsetParent);\n      }\n    }\n    return position;\n  }\n\n  /**\n   * Update className only when changed.\n   * @param {HTMLElement} obj\n   * @param {string} className\n   * @return {HTMLElement} obj\n   */\n  function updateClassname(obj, className) {\n    if (obj && obj.className !== className) {\n      obj.className = className;\n    }\n    return obj;\n  }\n\n  /**\n   * Update TOC highlighting and collapsed groupings.\n   */\n  function updateToc(headingsArray) {\n    // If a fixed content container was set\n    if (options.scrollContainer && document.querySelector(options.scrollContainer)) {\n      var top;\n      top = document.querySelector(options.scrollContainer).scrollTop;\n    } else {\n      top = document.documentElement.scrollTop || body.scrollTop;\n    }\n\n    // Add fixed class at offset\n    if (options.positionFixedSelector) {\n      updateFixedSidebarClass();\n    }\n\n    // Get the top most heading currently visible on the page so we know what to highlight.\n    var headings = headingsArray;\n    var topHeader;\n    // Using some instead of each so that we can escape early.\n    if (currentlyHighlighting && tocElement !== null && headings.length > 0) {\n      some.call(headings, function (heading, i) {\n        if (getHeadingTopPos(heading) > top + options.headingsOffset + 10) {\n          // Don't allow negative index value.\n          var index = i === 0 ? i : i - 1;\n          topHeader = headings[index];\n          return true;\n        } else if (i === headings.length - 1) {\n          // This allows scrolling for the last heading on the page.\n          topHeader = headings[headings.length - 1];\n          return true;\n        }\n      });\n      var oldActiveTocLink = tocElement.querySelector('.' + options.activeLinkClass);\n      var activeTocLink = tocElement.querySelector('.' + options.linkClass + '.node-name--' + topHeader.nodeName + '[href=\"' + options.basePath + '#' + topHeader.id.replace(/([ #;&,.+*~':\"!^$[\\]()=>|/\\\\@])/g, '\\\\$1') + '\"]');\n      // Performance improvement to only change the classes\n      // for the toc if a new link should be highlighted.\n      if (oldActiveTocLink === activeTocLink) {\n        return;\n      }\n\n      // Remove the active class from the other tocLinks.\n      var tocLinks = tocElement.querySelectorAll('.' + options.linkClass);\n      forEach.call(tocLinks, function (tocLink) {\n        updateClassname(tocLink, tocLink.className.replace(SPACE_CHAR + options.activeLinkClass, ''));\n      });\n      var tocLis = tocElement.querySelectorAll('.' + options.listItemClass);\n      forEach.call(tocLis, function (tocLi) {\n        updateClassname(tocLi, tocLi.className.replace(SPACE_CHAR + options.activeListItemClass, ''));\n      });\n\n      // Add the active class to the active tocLink.\n      if (activeTocLink && activeTocLink.className.indexOf(options.activeLinkClass) === -1) {\n        activeTocLink.className += SPACE_CHAR + options.activeLinkClass;\n      }\n      var li = activeTocLink && activeTocLink.parentNode;\n      if (li && li.className.indexOf(options.activeListItemClass) === -1) {\n        li.className += SPACE_CHAR + options.activeListItemClass;\n      }\n      var tocLists = tocElement.querySelectorAll('.' + options.listClass + '.' + options.collapsibleClass);\n\n      // Collapse the other collapsible lists.\n      forEach.call(tocLists, function (list) {\n        if (list.className.indexOf(options.isCollapsedClass) === -1) {\n          list.className += SPACE_CHAR + options.isCollapsedClass;\n        }\n      });\n\n      // Expand the active link's collapsible list and its sibling if applicable.\n      if (activeTocLink && activeTocLink.nextSibling && activeTocLink.nextSibling.className.indexOf(options.isCollapsedClass) !== -1) {\n        updateClassname(activeTocLink.nextSibling, activeTocLink.nextSibling.className.replace(SPACE_CHAR + options.isCollapsedClass, ''));\n      }\n      removeCollapsedFromParents(activeTocLink && activeTocLink.parentNode.parentNode);\n    }\n  }\n\n  /**\n   * Remove collapsed class from parent elements.\n   * @param {HTMLElement} element\n   * @return {HTMLElement}\n   */\n  function removeCollapsedFromParents(element) {\n    if (element && element.className.indexOf(options.collapsibleClass) !== -1 && element.className.indexOf(options.isCollapsedClass) !== -1) {\n      updateClassname(element, element.className.replace(SPACE_CHAR + options.isCollapsedClass, ''));\n      return removeCollapsedFromParents(element.parentNode.parentNode);\n    }\n    return element;\n  }\n\n  /**\n   * Disable TOC Animation when a link is clicked.\n   * @param {Event} event\n   */\n  function disableTocAnimation(event) {\n    var target = event.target || event.srcElement;\n    if (typeof target.className !== 'string' || target.className.indexOf(options.linkClass) === -1) {\n      return;\n    }\n    // Bind to tocLink clicks to temporarily disable highlighting\n    // while smoothScroll is animating.\n    currentlyHighlighting = false;\n  }\n\n  /**\n   * Enable TOC Animation.\n   */\n  function enableTocAnimation() {\n    currentlyHighlighting = true;\n  }\n  return {\n    enableTocAnimation,\n    disableTocAnimation,\n    render,\n    updateToc\n  };\n};","map":{"version":3,"names":["module","exports","options","forEach","some","body","document","tocElement","currentlyHighlighting","SPACE_CHAR","createEl","d","container","link","appendChild","createLink","children","length","list","createList","isCollapsed","child","render","parent","data","collapsed","firstChild","removeChild","item","createElement","a","listItemClass","setAttribute","onClick","onclick","includeTitleTags","textContent","includeHtml","childNodes","call","node","cloneNode","basePath","id","linkClass","nodeName","extraLinkClasses","listElement","orderedList","classes","listClass","extraListClasses","collapsibleClass","isCollapsedClass","updateFixedSidebarClass","scrollContainer","querySelector","top","scrollTop","documentElement","posFixedEl","positionFixedSelector","fixedSidebarOffset","offsetTop","className","indexOf","positionFixedClass","replace","getHeadingTopPos","obj","position","hasInnerContainers","offsetParent","updateClassname","updateToc","headingsArray","headings","topHeader","heading","i","headingsOffset","index","oldActiveTocLink","activeLinkClass","activeTocLink","tocLinks","querySelectorAll","tocLink","tocLis","tocLi","activeListItemClass","li","parentNode","tocLists","nextSibling","removeCollapsedFromParents","element","disableTocAnimation","event","target","srcElement","enableTocAnimation"],"sources":["C:/Users/drevo/Documents/GitHub/Crafts/TypeScript/Storybook/node_modules/tocbot/src/js/build-html.js"],"sourcesContent":["/* eslint no-var: off */\n\n/**\n * This file is responsible for building the DOM and updating DOM state.\n *\n * @author Tim Scanlin\n */\n\nmodule.exports = function (options) {\n  var forEach = [].forEach\n  var some = [].some\n  var body = document.body\n  var tocElement\n  var currentlyHighlighting = true\n  var SPACE_CHAR = ' '\n\n  /**\n   * Create link and list elements.\n   * @param {Object} d\n   * @param {HTMLElement} container\n   * @return {HTMLElement}\n   */\n  function createEl (d, container) {\n    var link = container.appendChild(createLink(d))\n    if (d.children.length) {\n      var list = createList(d.isCollapsed)\n      d.children.forEach(function (child) {\n        createEl(child, list)\n      })\n      link.appendChild(list)\n    }\n  }\n\n  /**\n   * Render nested heading array data into a given element.\n   * @param {HTMLElement} parent Optional. If provided updates the {@see tocElement} to match.\n   * @param {Array} data\n   * @return {HTMLElement}\n   */\n  function render (parent, data) {\n    var collapsed = false\n    var container = createList(collapsed)\n\n    data.forEach(function (d) {\n      createEl(d, container)\n    })\n\n    // Return if no TOC element is provided or known.\n    tocElement = parent || tocElement\n    if (tocElement === null) {\n      return\n    }\n\n    // Remove existing child if it exists.\n    if (tocElement.firstChild) {\n      tocElement.removeChild(tocElement.firstChild)\n    }\n\n    // Just return the parent and don't append the list if no links are found.\n    if (data.length === 0) {\n      return tocElement\n    }\n\n    // Append the Elements that have been created\n    return tocElement.appendChild(container)\n  }\n\n  /**\n   * Create link element.\n   * @param {Object} data\n   * @return {HTMLElement}\n   */\n  function createLink (data) {\n    var item = document.createElement('li')\n    var a = document.createElement('a')\n    if (options.listItemClass) {\n      item.setAttribute('class', options.listItemClass)\n    }\n\n    if (options.onClick) {\n      a.onclick = options.onClick\n    }\n\n    if (options.includeTitleTags) {\n      a.setAttribute('title', data.textContent)\n    }\n\n    if (options.includeHtml && data.childNodes.length) {\n      forEach.call(data.childNodes, function (node) {\n        a.appendChild(node.cloneNode(true))\n      })\n    } else {\n      // Default behavior. Set to textContent to keep tests happy.\n      a.textContent = data.textContent\n    }\n    a.setAttribute('href', options.basePath + '#' + data.id)\n    a.setAttribute('class', options.linkClass +\n      SPACE_CHAR + 'node-name--' + data.nodeName +\n      SPACE_CHAR + options.extraLinkClasses)\n    item.appendChild(a)\n    return item\n  }\n\n  /**\n   * Create list element.\n   * @param {Boolean} isCollapsed\n   * @return {HTMLElement}\n   */\n  function createList (isCollapsed) {\n    var listElement = (options.orderedList) ? 'ol' : 'ul'\n    var list = document.createElement(listElement)\n    var classes = options.listClass + SPACE_CHAR + options.extraListClasses\n    if (isCollapsed) {\n      // No plus/equals here fixes compilcation issue.\n      classes = classes + SPACE_CHAR + options.collapsibleClass\n      classes = classes + SPACE_CHAR + options.isCollapsedClass\n    }\n    list.setAttribute('class', classes)\n    return list\n  }\n\n  /**\n   * Update fixed sidebar class.\n   * @return {HTMLElement}\n   */\n  function updateFixedSidebarClass () {\n    if (options.scrollContainer && document.querySelector(options.scrollContainer)) {\n      var top\n      top = document.querySelector(options.scrollContainer).scrollTop\n    } else {\n      top = document.documentElement.scrollTop || body.scrollTop\n    }\n    var posFixedEl = document.querySelector(options.positionFixedSelector)\n\n    if (options.fixedSidebarOffset === 'auto') {\n      options.fixedSidebarOffset = tocElement.offsetTop\n    }\n\n    if (top > options.fixedSidebarOffset) {\n      if (posFixedEl.className.indexOf(options.positionFixedClass) === -1) {\n        posFixedEl.className += SPACE_CHAR + options.positionFixedClass\n      }\n    } else {\n      posFixedEl.className = posFixedEl.className.replace(SPACE_CHAR + options.positionFixedClass, '')\n    }\n  }\n\n  /**\n   * Get top position of heading\n   * @param {HTMLElement} obj\n   * @return {int} position\n   */\n  function getHeadingTopPos (obj) {\n    var position = 0\n    if (obj !== null) {\n      position = obj.offsetTop\n      if (options.hasInnerContainers) { position += getHeadingTopPos(obj.offsetParent) }\n    }\n    return position\n  }\n\n  /**\n   * Update className only when changed.\n   * @param {HTMLElement} obj\n   * @param {string} className\n   * @return {HTMLElement} obj\n   */\n  function updateClassname (obj, className) {\n    if (obj && obj.className !== className) {\n      obj.className = className\n    }\n    return obj\n  }\n\n  /**\n   * Update TOC highlighting and collapsed groupings.\n   */\n  function updateToc (headingsArray) {\n    // If a fixed content container was set\n    if (options.scrollContainer && document.querySelector(options.scrollContainer)) {\n      var top\n      top = document.querySelector(options.scrollContainer).scrollTop\n    } else {\n      top = document.documentElement.scrollTop || body.scrollTop\n    }\n\n    // Add fixed class at offset\n    if (options.positionFixedSelector) {\n      updateFixedSidebarClass()\n    }\n\n    // Get the top most heading currently visible on the page so we know what to highlight.\n    var headings = headingsArray\n    var topHeader\n    // Using some instead of each so that we can escape early.\n    if (currentlyHighlighting &&\n      tocElement !== null &&\n      headings.length > 0) {\n      some.call(headings, function (heading, i) {\n        if (getHeadingTopPos(heading) > top + options.headingsOffset + 10) {\n          // Don't allow negative index value.\n          var index = (i === 0) ? i : i - 1\n          topHeader = headings[index]\n          return true\n        } else if (i === headings.length - 1) {\n          // This allows scrolling for the last heading on the page.\n          topHeader = headings[headings.length - 1]\n          return true\n        }\n      })\n\n      var oldActiveTocLink = tocElement.querySelector('.' + options.activeLinkClass)\n      var activeTocLink = tocElement\n        .querySelector('.' + options.linkClass +\n          '.node-name--' + topHeader.nodeName +\n          '[href=\"' + options.basePath + '#' + topHeader.id.replace(/([ #;&,.+*~':\"!^$[\\]()=>|/\\\\@])/g, '\\\\$1') + '\"]')\n      // Performance improvement to only change the classes\n      // for the toc if a new link should be highlighted.\n      if (oldActiveTocLink === activeTocLink) {\n        return\n      }\n\n      // Remove the active class from the other tocLinks.\n      var tocLinks = tocElement\n        .querySelectorAll('.' + options.linkClass)\n      forEach.call(tocLinks, function (tocLink) {\n        updateClassname(tocLink, tocLink.className.replace(SPACE_CHAR + options.activeLinkClass, ''))\n      })\n      var tocLis = tocElement\n        .querySelectorAll('.' + options.listItemClass)\n      forEach.call(tocLis, function (tocLi) {\n        updateClassname(tocLi, tocLi.className.replace(SPACE_CHAR + options.activeListItemClass, ''))\n      })\n\n      // Add the active class to the active tocLink.\n      if (activeTocLink && activeTocLink.className.indexOf(options.activeLinkClass) === -1) {\n        activeTocLink.className += SPACE_CHAR + options.activeLinkClass\n      }\n      var li = activeTocLink && activeTocLink.parentNode\n      if (li && li.className.indexOf(options.activeListItemClass) === -1) {\n        li.className += SPACE_CHAR + options.activeListItemClass\n      }\n\n      var tocLists = tocElement\n        .querySelectorAll('.' + options.listClass + '.' + options.collapsibleClass)\n\n      // Collapse the other collapsible lists.\n      forEach.call(tocLists, function (list) {\n        if (list.className.indexOf(options.isCollapsedClass) === -1) {\n          list.className += SPACE_CHAR + options.isCollapsedClass\n        }\n      })\n\n      // Expand the active link's collapsible list and its sibling if applicable.\n      if (activeTocLink && activeTocLink.nextSibling && activeTocLink.nextSibling.className.indexOf(options.isCollapsedClass) !== -1) {\n        updateClassname(activeTocLink.nextSibling, activeTocLink.nextSibling.className.replace(SPACE_CHAR + options.isCollapsedClass, ''))\n      }\n      removeCollapsedFromParents(activeTocLink && activeTocLink.parentNode.parentNode)\n    }\n  }\n\n  /**\n   * Remove collapsed class from parent elements.\n   * @param {HTMLElement} element\n   * @return {HTMLElement}\n   */\n  function removeCollapsedFromParents (element) {\n    if (element && element.className.indexOf(options.collapsibleClass) !== -1 && element.className.indexOf(options.isCollapsedClass) !== -1) {\n      updateClassname(element, element.className.replace(SPACE_CHAR + options.isCollapsedClass, ''))\n      return removeCollapsedFromParents(element.parentNode.parentNode)\n    }\n    return element\n  }\n\n  /**\n   * Disable TOC Animation when a link is clicked.\n   * @param {Event} event\n   */\n  function disableTocAnimation (event) {\n    var target = event.target || event.srcElement\n    if (typeof target.className !== 'string' || target.className.indexOf(options.linkClass) === -1) {\n      return\n    }\n    // Bind to tocLink clicks to temporarily disable highlighting\n    // while smoothScroll is animating.\n    currentlyHighlighting = false\n  }\n\n  /**\n   * Enable TOC Animation.\n   */\n  function enableTocAnimation () {\n    currentlyHighlighting = true\n  }\n\n  return {\n    enableTocAnimation,\n    disableTocAnimation,\n    render,\n    updateToc\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}