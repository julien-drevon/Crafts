{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/drevo/Documents/GitHub/Crafts/TypeScript/Storybook/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport '../utils/click/isClickableInput.js';\nimport { createFileList } from '../utils/dataTransfer/FileList.js';\nimport '../utils/dataTransfer/Clipboard.js';\nimport '../utils/edit/isEditable.js';\nimport '../utils/edit/maxLength.js';\nimport { setFiles } from '../utils/edit/setFiles.js';\nimport { isElementType } from '../utils/misc/isElementType.js';\nimport { isDisabled } from '../utils/misc/isDisabled.js';\nimport { getWindow } from '../utils/misc/getWindow.js';\nimport '../utils/keyDef/readNextDescriptor.js';\nimport '../utils/misc/level.js';\nimport '../options.js';\nfunction upload(_x, _x2) {\n  return _upload.apply(this, arguments);\n}\nfunction _upload() {\n  _upload = _asyncToGenerator(function* (element, fileOrFiles) {\n    const input = isElementType(element, 'label') ? element.control : element;\n    if (!input || !isElementType(input, 'input', {\n      type: 'file'\n    })) {\n      throw new TypeError(`The ${input === element ? 'given' : 'associated'} ${input === null || input === void 0 ? void 0 : input.tagName} element does not accept file uploads`);\n    }\n    if (isDisabled(element)) return;\n    const files = (Array.isArray(fileOrFiles) ? fileOrFiles : [fileOrFiles]).filter(file => !this.config.applyAccept || isAcceptableFile(file, input.accept)).slice(0, input.multiple ? undefined : 1);\n    const fileDialog = () => {\n      var _input_files;\n      // do not fire an input event if the file selection does not change\n      if (files.length === ((_input_files = input.files) === null || _input_files === void 0 ? void 0 : _input_files.length) && files.every((f, i) => {\n        var _input_files;\n        return f === ((_input_files = input.files) === null || _input_files === void 0 ? void 0 : _input_files.item(i));\n      })) {\n        return;\n      }\n      setFiles(input, createFileList(getWindow(element), files));\n      this.dispatchUIEvent(input, 'input');\n      this.dispatchUIEvent(input, 'change');\n    };\n    input.addEventListener('fileDialog', fileDialog);\n    yield this.click(element);\n    input.removeEventListener('fileDialog', fileDialog);\n  });\n  return _upload.apply(this, arguments);\n}\nfunction isAcceptableFile(file, accept) {\n  if (!accept) {\n    return true;\n  }\n  const wildcards = ['audio/*', 'image/*', 'video/*'];\n  return accept.split(',').some(acceptToken => {\n    if (acceptToken.startsWith('.')) {\n      // tokens starting with a dot represent a file extension\n      return file.name.endsWith(acceptToken);\n    } else if (wildcards.includes(acceptToken)) {\n      return file.type.startsWith(acceptToken.substr(0, acceptToken.length - 1));\n    }\n    return file.type === acceptToken;\n  });\n}\nexport { upload };","map":{"version":3,"names":["createFileList","setFiles","isElementType","isDisabled","getWindow","upload","_x","_x2","_upload","apply","arguments","_asyncToGenerator","element","fileOrFiles","input","control","type","TypeError","tagName","files","Array","isArray","filter","file","config","applyAccept","isAcceptableFile","accept","slice","multiple","undefined","fileDialog","_input_files","length","every","f","i","item","dispatchUIEvent","addEventListener","click","removeEventListener","wildcards","split","some","acceptToken","startsWith","name","endsWith","includes","substr"],"sources":["C:/Users/drevo/Documents/GitHub/Crafts/TypeScript/Storybook/node_modules/@testing-library/user-event/dist/esm/utility/upload.js"],"sourcesContent":["import '../utils/click/isClickableInput.js';\nimport { createFileList } from '../utils/dataTransfer/FileList.js';\nimport '../utils/dataTransfer/Clipboard.js';\nimport '../utils/edit/isEditable.js';\nimport '../utils/edit/maxLength.js';\nimport { setFiles } from '../utils/edit/setFiles.js';\nimport { isElementType } from '../utils/misc/isElementType.js';\nimport { isDisabled } from '../utils/misc/isDisabled.js';\nimport { getWindow } from '../utils/misc/getWindow.js';\nimport '../utils/keyDef/readNextDescriptor.js';\nimport '../utils/misc/level.js';\nimport '../options.js';\n\nasync function upload(element, fileOrFiles) {\n    const input = isElementType(element, 'label') ? element.control : element;\n    if (!input || !isElementType(input, 'input', {\n        type: 'file'\n    })) {\n        throw new TypeError(`The ${input === element ? 'given' : 'associated'} ${input === null || input === void 0 ? void 0 : input.tagName} element does not accept file uploads`);\n    }\n    if (isDisabled(element)) return;\n    const files = (Array.isArray(fileOrFiles) ? fileOrFiles : [\n        fileOrFiles\n    ]).filter((file)=>!this.config.applyAccept || isAcceptableFile(file, input.accept)).slice(0, input.multiple ? undefined : 1);\n    const fileDialog = ()=>{\n        var _input_files;\n        // do not fire an input event if the file selection does not change\n        if (files.length === ((_input_files = input.files) === null || _input_files === void 0 ? void 0 : _input_files.length) && files.every((f, i)=>{\n            var _input_files;\n            return f === ((_input_files = input.files) === null || _input_files === void 0 ? void 0 : _input_files.item(i));\n        })) {\n            return;\n        }\n        setFiles(input, createFileList(getWindow(element), files));\n        this.dispatchUIEvent(input, 'input');\n        this.dispatchUIEvent(input, 'change');\n    };\n    input.addEventListener('fileDialog', fileDialog);\n    await this.click(element);\n    input.removeEventListener('fileDialog', fileDialog);\n}\nfunction isAcceptableFile(file, accept) {\n    if (!accept) {\n        return true;\n    }\n    const wildcards = [\n        'audio/*',\n        'image/*',\n        'video/*'\n    ];\n    return accept.split(',').some((acceptToken)=>{\n        if (acceptToken.startsWith('.')) {\n            // tokens starting with a dot represent a file extension\n            return file.name.endsWith(acceptToken);\n        } else if (wildcards.includes(acceptToken)) {\n            return file.type.startsWith(acceptToken.substr(0, acceptToken.length - 1));\n        }\n        return file.type === acceptToken;\n    });\n}\n\nexport { upload };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}