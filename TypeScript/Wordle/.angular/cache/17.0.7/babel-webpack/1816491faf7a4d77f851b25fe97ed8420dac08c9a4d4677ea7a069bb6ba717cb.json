{"ast":null,"code":"import { PointerEventsCheckLevel } from '../../options.js';\nimport { getWindow } from '../misc/getWindow.js';\nimport { isElementType } from '../misc/isElementType.js';\nimport { ApiLevel, getLevelRef } from '../misc/level.js';\nfunction hasPointerEvents(instance, element) {\n  var _checkPointerEvents;\n  return ((_checkPointerEvents = checkPointerEvents(instance, element)) === null || _checkPointerEvents === void 0 ? void 0 : _checkPointerEvents.pointerEvents) !== 'none';\n}\nfunction closestPointerEventsDeclaration(element) {\n  const window = getWindow(element);\n  for (let el = element, tree = []; el === null || el === void 0 ? void 0 : el.ownerDocument; el = el.parentElement) {\n    tree.push(el);\n    const pointerEvents = window.getComputedStyle(el).pointerEvents;\n    if (pointerEvents && !['inherit', 'unset'].includes(pointerEvents)) {\n      return {\n        pointerEvents,\n        tree\n      };\n    }\n  }\n  return undefined;\n}\nconst PointerEventsCheck = Symbol('Last check for pointer-events');\nfunction checkPointerEvents(instance, element) {\n  const lastCheck = element[PointerEventsCheck];\n  const needsCheck = instance.config.pointerEventsCheck !== PointerEventsCheckLevel.Never && (!lastCheck || hasBitFlag(instance.config.pointerEventsCheck, PointerEventsCheckLevel.EachApiCall) && lastCheck[ApiLevel.Call] !== getLevelRef(instance, ApiLevel.Call) || hasBitFlag(instance.config.pointerEventsCheck, PointerEventsCheckLevel.EachTrigger) && lastCheck[ApiLevel.Trigger] !== getLevelRef(instance, ApiLevel.Trigger));\n  if (!needsCheck) {\n    return lastCheck === null || lastCheck === void 0 ? void 0 : lastCheck.result;\n  }\n  const declaration = closestPointerEventsDeclaration(element);\n  element[PointerEventsCheck] = {\n    [ApiLevel.Call]: getLevelRef(instance, ApiLevel.Call),\n    [ApiLevel.Trigger]: getLevelRef(instance, ApiLevel.Trigger),\n    result: declaration\n  };\n  return declaration;\n}\nfunction assertPointerEvents(instance, element) {\n  const declaration = checkPointerEvents(instance, element);\n  if ((declaration === null || declaration === void 0 ? void 0 : declaration.pointerEvents) === 'none') {\n    throw new Error([`Unable to perform pointer interaction as the element ${declaration.tree.length > 1 ? 'inherits' : 'has'} \\`pointer-events: none\\`:`, '', printTree(declaration.tree)].join('\\n'));\n  }\n}\nfunction printTree(tree) {\n  return tree.reverse().map((el, i) => [''.padEnd(i), el.tagName, el.id && `#${el.id}`, el.hasAttribute('data-testid') && `(testId=${el.getAttribute('data-testid')})`, getLabelDescr(el), tree.length > 1 && i === 0 && '  <-- This element declared `pointer-events: none`', tree.length > 1 && i === tree.length - 1 && '  <-- Asserted pointer events here'].filter(Boolean).join('')).join('\\n');\n}\nfunction getLabelDescr(element) {\n  var _element_labels;\n  let label;\n  if (element.hasAttribute('aria-label')) {\n    label = element.getAttribute('aria-label');\n  } else if (element.hasAttribute('aria-labelledby')) {\n    var _element_ownerDocument_getElementById_textContent, _element_ownerDocument_getElementById;\n    label = (_element_ownerDocument_getElementById = element.ownerDocument.getElementById(element.getAttribute('aria-labelledby'))) === null || _element_ownerDocument_getElementById === void 0 ? void 0 : (_element_ownerDocument_getElementById_textContent = _element_ownerDocument_getElementById.textContent) === null || _element_ownerDocument_getElementById_textContent === void 0 ? void 0 : _element_ownerDocument_getElementById_textContent.trim();\n  } else if (isElementType(element, ['button', 'input', 'meter', 'output', 'progress', 'select', 'textarea']) && ((_element_labels = element.labels) === null || _element_labels === void 0 ? void 0 : _element_labels.length)) {\n    label = Array.from(element.labels).map(el => {\n      var _el_textContent;\n      return (_el_textContent = el.textContent) === null || _el_textContent === void 0 ? void 0 : _el_textContent.trim();\n    }).join('|');\n  } else if (isElementType(element, 'button')) {\n    var _element_textContent;\n    label = (_element_textContent = element.textContent) === null || _element_textContent === void 0 ? void 0 : _element_textContent.trim();\n  }\n  label = label === null || label === void 0 ? void 0 : label.replace(/\\n/g, '  ');\n  if (Number(label === null || label === void 0 ? void 0 : label.length) > 30) {\n    label = `${label === null || label === void 0 ? void 0 : label.substring(0, 29)}…`;\n  }\n  return label ? `(label=${label})` : '';\n}\n// With the eslint rule and prettier the bitwise operation isn't nice to read\nfunction hasBitFlag(conf, flag) {\n  // eslint-disable-next-line no-bitwise\n  return (conf & flag) > 0;\n}\nexport { assertPointerEvents, hasPointerEvents };","map":{"version":3,"names":["PointerEventsCheckLevel","getWindow","isElementType","ApiLevel","getLevelRef","hasPointerEvents","instance","element","_checkPointerEvents","checkPointerEvents","pointerEvents","closestPointerEventsDeclaration","window","el","tree","ownerDocument","parentElement","push","getComputedStyle","includes","undefined","PointerEventsCheck","Symbol","lastCheck","needsCheck","config","pointerEventsCheck","Never","hasBitFlag","EachApiCall","Call","EachTrigger","Trigger","result","declaration","assertPointerEvents","Error","length","printTree","join","reverse","map","i","padEnd","tagName","id","hasAttribute","getAttribute","getLabelDescr","filter","Boolean","_element_labels","label","_element_ownerDocument_getElementById_textContent","_element_ownerDocument_getElementById","getElementById","textContent","trim","labels","Array","from","_el_textContent","_element_textContent","replace","Number","substring","conf","flag"],"sources":["C:/Users/drevo/Documents/GitHub/Crafts/TypeScript/Storybook/node_modules/@testing-library/user-event/dist/esm/utils/pointer/cssPointerEvents.js"],"sourcesContent":["import { PointerEventsCheckLevel } from '../../options.js';\nimport { getWindow } from '../misc/getWindow.js';\nimport { isElementType } from '../misc/isElementType.js';\nimport { ApiLevel, getLevelRef } from '../misc/level.js';\n\nfunction hasPointerEvents(instance, element) {\n    var _checkPointerEvents;\n    return ((_checkPointerEvents = checkPointerEvents(instance, element)) === null || _checkPointerEvents === void 0 ? void 0 : _checkPointerEvents.pointerEvents) !== 'none';\n}\nfunction closestPointerEventsDeclaration(element) {\n    const window = getWindow(element);\n    for(let el = element, tree = []; el === null || el === void 0 ? void 0 : el.ownerDocument; el = el.parentElement){\n        tree.push(el);\n        const pointerEvents = window.getComputedStyle(el).pointerEvents;\n        if (pointerEvents && ![\n            'inherit',\n            'unset'\n        ].includes(pointerEvents)) {\n            return {\n                pointerEvents,\n                tree\n            };\n        }\n    }\n    return undefined;\n}\nconst PointerEventsCheck = Symbol('Last check for pointer-events');\nfunction checkPointerEvents(instance, element) {\n    const lastCheck = element[PointerEventsCheck];\n    const needsCheck = instance.config.pointerEventsCheck !== PointerEventsCheckLevel.Never && (!lastCheck || hasBitFlag(instance.config.pointerEventsCheck, PointerEventsCheckLevel.EachApiCall) && lastCheck[ApiLevel.Call] !== getLevelRef(instance, ApiLevel.Call) || hasBitFlag(instance.config.pointerEventsCheck, PointerEventsCheckLevel.EachTrigger) && lastCheck[ApiLevel.Trigger] !== getLevelRef(instance, ApiLevel.Trigger));\n    if (!needsCheck) {\n        return lastCheck === null || lastCheck === void 0 ? void 0 : lastCheck.result;\n    }\n    const declaration = closestPointerEventsDeclaration(element);\n    element[PointerEventsCheck] = {\n        [ApiLevel.Call]: getLevelRef(instance, ApiLevel.Call),\n        [ApiLevel.Trigger]: getLevelRef(instance, ApiLevel.Trigger),\n        result: declaration\n    };\n    return declaration;\n}\nfunction assertPointerEvents(instance, element) {\n    const declaration = checkPointerEvents(instance, element);\n    if ((declaration === null || declaration === void 0 ? void 0 : declaration.pointerEvents) === 'none') {\n        throw new Error([\n            `Unable to perform pointer interaction as the element ${declaration.tree.length > 1 ? 'inherits' : 'has'} \\`pointer-events: none\\`:`,\n            '',\n            printTree(declaration.tree)\n        ].join('\\n'));\n    }\n}\nfunction printTree(tree) {\n    return tree.reverse().map((el, i)=>[\n            ''.padEnd(i),\n            el.tagName,\n            el.id && `#${el.id}`,\n            el.hasAttribute('data-testid') && `(testId=${el.getAttribute('data-testid')})`,\n            getLabelDescr(el),\n            tree.length > 1 && i === 0 && '  <-- This element declared `pointer-events: none`',\n            tree.length > 1 && i === tree.length - 1 && '  <-- Asserted pointer events here'\n        ].filter(Boolean).join('')).join('\\n');\n}\nfunction getLabelDescr(element) {\n    var _element_labels;\n    let label;\n    if (element.hasAttribute('aria-label')) {\n        label = element.getAttribute('aria-label');\n    } else if (element.hasAttribute('aria-labelledby')) {\n        var _element_ownerDocument_getElementById_textContent, _element_ownerDocument_getElementById;\n        label = (_element_ownerDocument_getElementById = element.ownerDocument.getElementById(element.getAttribute('aria-labelledby'))) === null || _element_ownerDocument_getElementById === void 0 ? void 0 : (_element_ownerDocument_getElementById_textContent = _element_ownerDocument_getElementById.textContent) === null || _element_ownerDocument_getElementById_textContent === void 0 ? void 0 : _element_ownerDocument_getElementById_textContent.trim();\n    } else if (isElementType(element, [\n        'button',\n        'input',\n        'meter',\n        'output',\n        'progress',\n        'select',\n        'textarea'\n    ]) && ((_element_labels = element.labels) === null || _element_labels === void 0 ? void 0 : _element_labels.length)) {\n        label = Array.from(element.labels).map((el)=>{\n            var _el_textContent;\n            return (_el_textContent = el.textContent) === null || _el_textContent === void 0 ? void 0 : _el_textContent.trim();\n        }).join('|');\n    } else if (isElementType(element, 'button')) {\n        var _element_textContent;\n        label = (_element_textContent = element.textContent) === null || _element_textContent === void 0 ? void 0 : _element_textContent.trim();\n    }\n    label = label === null || label === void 0 ? void 0 : label.replace(/\\n/g, '  ');\n    if (Number(label === null || label === void 0 ? void 0 : label.length) > 30) {\n        label = `${label === null || label === void 0 ? void 0 : label.substring(0, 29)}…`;\n    }\n    return label ? `(label=${label})` : '';\n}\n// With the eslint rule and prettier the bitwise operation isn't nice to read\nfunction hasBitFlag(conf, flag) {\n    // eslint-disable-next-line no-bitwise\n    return (conf & flag) > 0;\n}\n\nexport { assertPointerEvents, hasPointerEvents };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}