{"ast":null,"code":"/**\n * implements https://w3c.github.io/accname/\n */\nimport ArrayFrom from \"./polyfills/array.from.mjs\";\nimport SetLike from \"./polyfills/SetLike.mjs\";\nimport { hasAnyConcreteRoles, isElement, isHTMLTableCaptionElement, isHTMLInputElement, isHTMLSelectElement, isHTMLTextAreaElement, safeWindow, isHTMLFieldSetElement, isHTMLLegendElement, isHTMLOptGroupElement, isHTMLTableElement, isHTMLSlotElement, isSVGSVGElement, isSVGTitleElement, queryIdRefs, getLocalName } from \"./util.mjs\";\n\n/**\n *  A string of characters where all carriage returns, newlines, tabs, and form-feeds are replaced with a single space, and multiple spaces are reduced to a single space. The string contains only character data; it does not contain any markup.\n */\n\n/**\n *\n * @param {string} string -\n * @returns {FlatString} -\n */\nfunction asFlatString(s) {\n  return s.trim().replace(/\\s\\s+/g, \" \");\n}\n\n/**\n *\n * @param node -\n * @param options - These are not optional to prevent accidentally calling it without options in `computeAccessibleName`\n * @returns {boolean} -\n */\nfunction isHidden(node, getComputedStyleImplementation) {\n  if (!isElement(node)) {\n    return false;\n  }\n  if (node.hasAttribute(\"hidden\") || node.getAttribute(\"aria-hidden\") === \"true\") {\n    return true;\n  }\n  var style = getComputedStyleImplementation(node);\n  return style.getPropertyValue(\"display\") === \"none\" || style.getPropertyValue(\"visibility\") === \"hidden\";\n}\n\n/**\n * @param {Node} node -\n * @returns {boolean} - As defined in step 2E of https://w3c.github.io/accname/#mapping_additional_nd_te\n */\nfunction isControl(node) {\n  return hasAnyConcreteRoles(node, [\"button\", \"combobox\", \"listbox\", \"textbox\"]) || hasAbstractRole(node, \"range\");\n}\nfunction hasAbstractRole(node, role) {\n  if (!isElement(node)) {\n    return false;\n  }\n  switch (role) {\n    case \"range\":\n      return hasAnyConcreteRoles(node, [\"meter\", \"progressbar\", \"scrollbar\", \"slider\", \"spinbutton\"]);\n    default:\n      throw new TypeError(\"No knowledge about abstract role '\".concat(role, \"'. This is likely a bug :(\"));\n  }\n}\n\n/**\n * element.querySelectorAll but also considers owned tree\n * @param element\n * @param selectors\n */\nfunction querySelectorAllSubtree(element, selectors) {\n  var elements = ArrayFrom(element.querySelectorAll(selectors));\n  queryIdRefs(element, \"aria-owns\").forEach(function (root) {\n    // babel transpiles this assuming an iterator\n    elements.push.apply(elements, ArrayFrom(root.querySelectorAll(selectors)));\n  });\n  return elements;\n}\nfunction querySelectedOptions(listbox) {\n  if (isHTMLSelectElement(listbox)) {\n    // IE11 polyfill\n    return listbox.selectedOptions || querySelectorAllSubtree(listbox, \"[selected]\");\n  }\n  return querySelectorAllSubtree(listbox, '[aria-selected=\"true\"]');\n}\nfunction isMarkedPresentational(node) {\n  return hasAnyConcreteRoles(node, [\"none\", \"presentation\"]);\n}\n\n/**\n * Elements specifically listed in html-aam\n *\n * We don't need this for `label` or `legend` elements.\n * Their implicit roles already allow \"naming from content\".\n *\n * sources:\n *\n * - https://w3c.github.io/html-aam/#table-element\n */\nfunction isNativeHostLanguageTextAlternativeElement(node) {\n  return isHTMLTableCaptionElement(node);\n}\n\n/**\n * https://w3c.github.io/aria/#namefromcontent\n */\nfunction allowsNameFromContent(node) {\n  return hasAnyConcreteRoles(node, [\"button\", \"cell\", \"checkbox\", \"columnheader\", \"gridcell\", \"heading\", \"label\", \"legend\", \"link\", \"menuitem\", \"menuitemcheckbox\", \"menuitemradio\", \"option\", \"radio\", \"row\", \"rowheader\", \"switch\", \"tab\", \"tooltip\", \"treeitem\"]);\n}\n\n/**\n * TODO https://github.com/eps1lon/dom-accessibility-api/issues/100\n */\nfunction isDescendantOfNativeHostLanguageTextAlternativeElement(\n// eslint-disable-next-line @typescript-eslint/no-unused-vars -- not implemented yet\nnode) {\n  return false;\n}\nfunction getValueOfTextbox(element) {\n  if (isHTMLInputElement(element) || isHTMLTextAreaElement(element)) {\n    return element.value;\n  }\n  // https://github.com/eps1lon/dom-accessibility-api/issues/4\n  return element.textContent || \"\";\n}\nfunction getTextualContent(declaration) {\n  var content = declaration.getPropertyValue(\"content\");\n  if (/^[\"'].*[\"']$/.test(content)) {\n    return content.slice(1, -1);\n  }\n  return \"\";\n}\n\n/**\n * https://html.spec.whatwg.org/multipage/forms.html#category-label\n * TODO: form-associated custom elements\n * @param element\n */\nfunction isLabelableElement(element) {\n  var localName = getLocalName(element);\n  return localName === \"button\" || localName === \"input\" && element.getAttribute(\"type\") !== \"hidden\" || localName === \"meter\" || localName === \"output\" || localName === \"progress\" || localName === \"select\" || localName === \"textarea\";\n}\n\n/**\n * > [...], then the first such descendant in tree order is the label element's labeled control.\n * -- https://html.spec.whatwg.org/multipage/forms.html#labeled-control\n * @param element\n */\nfunction findLabelableElement(element) {\n  if (isLabelableElement(element)) {\n    return element;\n  }\n  var labelableElement = null;\n  element.childNodes.forEach(function (childNode) {\n    if (labelableElement === null && isElement(childNode)) {\n      var descendantLabelableElement = findLabelableElement(childNode);\n      if (descendantLabelableElement !== null) {\n        labelableElement = descendantLabelableElement;\n      }\n    }\n  });\n  return labelableElement;\n}\n\n/**\n * Polyfill of HTMLLabelElement.control\n * https://html.spec.whatwg.org/multipage/forms.html#labeled-control\n * @param label\n */\nfunction getControlOfLabel(label) {\n  if (label.control !== undefined) {\n    return label.control;\n  }\n  var htmlFor = label.getAttribute(\"for\");\n  if (htmlFor !== null) {\n    return label.ownerDocument.getElementById(htmlFor);\n  }\n  return findLabelableElement(label);\n}\n\n/**\n * Polyfill of HTMLInputElement.labels\n * https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/labels\n * @param element\n */\nfunction getLabels(element) {\n  var labelsProperty = element.labels;\n  if (labelsProperty === null) {\n    return labelsProperty;\n  }\n  if (labelsProperty !== undefined) {\n    return ArrayFrom(labelsProperty);\n  }\n\n  // polyfill\n  if (!isLabelableElement(element)) {\n    return null;\n  }\n  var document = element.ownerDocument;\n  return ArrayFrom(document.querySelectorAll(\"label\")).filter(function (label) {\n    return getControlOfLabel(label) === element;\n  });\n}\n\n/**\n * Gets the contents of a slot used for computing the accname\n * @param slot\n */\nfunction getSlotContents(slot) {\n  // Computing the accessible name for elements containing slots is not\n  // currently defined in the spec. This implementation reflects the\n  // behavior of NVDA 2020.2/Firefox 81 and iOS VoiceOver/Safari 13.6.\n  var assignedNodes = slot.assignedNodes();\n  if (assignedNodes.length === 0) {\n    // if no nodes are assigned to the slot, it displays the default content\n    return ArrayFrom(slot.childNodes);\n  }\n  return assignedNodes;\n}\n\n/**\n * implements https://w3c.github.io/accname/#mapping_additional_nd_te\n * @param root\n * @param options\n * @returns\n */\nexport function computeTextAlternative(root) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var consultedNodes = new SetLike();\n  var window = safeWindow(root);\n  var _options$compute = options.compute,\n    compute = _options$compute === void 0 ? \"name\" : _options$compute,\n    _options$computedStyl = options.computedStyleSupportsPseudoElements,\n    computedStyleSupportsPseudoElements = _options$computedStyl === void 0 ? options.getComputedStyle !== undefined : _options$computedStyl,\n    _options$getComputedS = options.getComputedStyle,\n    getComputedStyle = _options$getComputedS === void 0 ? window.getComputedStyle.bind(window) : _options$getComputedS,\n    _options$hidden = options.hidden,\n    hidden = _options$hidden === void 0 ? false : _options$hidden;\n\n  // 2F.i\n  function computeMiscTextAlternative(node, context) {\n    var accumulatedText = \"\";\n    if (isElement(node) && computedStyleSupportsPseudoElements) {\n      var pseudoBefore = getComputedStyle(node, \"::before\");\n      var beforeContent = getTextualContent(pseudoBefore);\n      accumulatedText = \"\".concat(beforeContent, \" \").concat(accumulatedText);\n    }\n\n    // FIXME: Including aria-owns is not defined in the spec\n    // But it is required in the web-platform-test\n    var childNodes = isHTMLSlotElement(node) ? getSlotContents(node) : ArrayFrom(node.childNodes).concat(queryIdRefs(node, \"aria-owns\"));\n    childNodes.forEach(function (child) {\n      var result = computeTextAlternative(child, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false,\n        recursion: true\n      });\n      // TODO: Unclear why display affects delimiter\n      // see https://github.com/w3c/accname/issues/3\n      var display = isElement(child) ? getComputedStyle(child).getPropertyValue(\"display\") : \"inline\";\n      var separator = display !== \"inline\" ? \" \" : \"\";\n      // trailing separator for wpt tests\n      accumulatedText += \"\".concat(separator).concat(result).concat(separator);\n    });\n    if (isElement(node) && computedStyleSupportsPseudoElements) {\n      var pseudoAfter = getComputedStyle(node, \"::after\");\n      var afterContent = getTextualContent(pseudoAfter);\n      accumulatedText = \"\".concat(accumulatedText, \" \").concat(afterContent);\n    }\n    return accumulatedText.trim();\n  }\n\n  /**\n   *\n   * @param element\n   * @param attributeName\n   * @returns A string non-empty string or `null`\n   */\n  function useAttribute(element, attributeName) {\n    var attribute = element.getAttributeNode(attributeName);\n    if (attribute !== null && !consultedNodes.has(attribute) && attribute.value.trim() !== \"\") {\n      consultedNodes.add(attribute);\n      return attribute.value;\n    }\n    return null;\n  }\n  function computeTooltipAttributeValue(node) {\n    if (!isElement(node)) {\n      return null;\n    }\n    return useAttribute(node, \"title\");\n  }\n  function computeElementTextAlternative(node) {\n    if (!isElement(node)) {\n      return null;\n    }\n\n    // https://w3c.github.io/html-aam/#fieldset-and-legend-elements\n    if (isHTMLFieldSetElement(node)) {\n      consultedNodes.add(node);\n      var children = ArrayFrom(node.childNodes);\n      for (var i = 0; i < children.length; i += 1) {\n        var child = children[i];\n        if (isHTMLLegendElement(child)) {\n          return computeTextAlternative(child, {\n            isEmbeddedInLabel: false,\n            isReferenced: false,\n            recursion: false\n          });\n        }\n      }\n    } else if (isHTMLTableElement(node)) {\n      // https://w3c.github.io/html-aam/#table-element\n      consultedNodes.add(node);\n      var _children = ArrayFrom(node.childNodes);\n      for (var _i = 0; _i < _children.length; _i += 1) {\n        var _child = _children[_i];\n        if (isHTMLTableCaptionElement(_child)) {\n          return computeTextAlternative(_child, {\n            isEmbeddedInLabel: false,\n            isReferenced: false,\n            recursion: false\n          });\n        }\n      }\n    } else if (isSVGSVGElement(node)) {\n      // https://www.w3.org/TR/svg-aam-1.0/\n      consultedNodes.add(node);\n      var _children2 = ArrayFrom(node.childNodes);\n      for (var _i2 = 0; _i2 < _children2.length; _i2 += 1) {\n        var _child2 = _children2[_i2];\n        if (isSVGTitleElement(_child2)) {\n          return _child2.textContent;\n        }\n      }\n      return null;\n    } else if (getLocalName(node) === \"img\" || getLocalName(node) === \"area\") {\n      // https://w3c.github.io/html-aam/#area-element\n      // https://w3c.github.io/html-aam/#img-element\n      var nameFromAlt = useAttribute(node, \"alt\");\n      if (nameFromAlt !== null) {\n        return nameFromAlt;\n      }\n    } else if (isHTMLOptGroupElement(node)) {\n      var nameFromLabel = useAttribute(node, \"label\");\n      if (nameFromLabel !== null) {\n        return nameFromLabel;\n      }\n    }\n    if (isHTMLInputElement(node) && (node.type === \"button\" || node.type === \"submit\" || node.type === \"reset\")) {\n      // https://w3c.github.io/html-aam/#input-type-text-input-type-password-input-type-search-input-type-tel-input-type-email-input-type-url-and-textarea-element-accessible-description-computation\n      var nameFromValue = useAttribute(node, \"value\");\n      if (nameFromValue !== null) {\n        return nameFromValue;\n      }\n\n      // TODO: l10n\n      if (node.type === \"submit\") {\n        return \"Submit\";\n      }\n      // TODO: l10n\n      if (node.type === \"reset\") {\n        return \"Reset\";\n      }\n    }\n    var labels = getLabels(node);\n    if (labels !== null && labels.length !== 0) {\n      consultedNodes.add(node);\n      return ArrayFrom(labels).map(function (element) {\n        return computeTextAlternative(element, {\n          isEmbeddedInLabel: true,\n          isReferenced: false,\n          recursion: true\n        });\n      }).filter(function (label) {\n        return label.length > 0;\n      }).join(\" \");\n    }\n\n    // https://w3c.github.io/html-aam/#input-type-image-accessible-name-computation\n    // TODO: wpt test consider label elements but html-aam does not mention them\n    // We follow existing implementations over spec\n    if (isHTMLInputElement(node) && node.type === \"image\") {\n      var _nameFromAlt = useAttribute(node, \"alt\");\n      if (_nameFromAlt !== null) {\n        return _nameFromAlt;\n      }\n      var nameFromTitle = useAttribute(node, \"title\");\n      if (nameFromTitle !== null) {\n        return nameFromTitle;\n      }\n\n      // TODO: l10n\n      return \"Submit Query\";\n    }\n    if (hasAnyConcreteRoles(node, [\"button\"])) {\n      // https://www.w3.org/TR/html-aam-1.0/#button-element\n      var nameFromSubTree = computeMiscTextAlternative(node, {\n        isEmbeddedInLabel: false,\n        isReferenced: false\n      });\n      if (nameFromSubTree !== \"\") {\n        return nameFromSubTree;\n      }\n    }\n    return null;\n  }\n  function computeTextAlternative(current, context) {\n    if (consultedNodes.has(current)) {\n      return \"\";\n    }\n\n    // 2A\n    if (!hidden && isHidden(current, getComputedStyle) && !context.isReferenced) {\n      consultedNodes.add(current);\n      return \"\";\n    }\n\n    // 2B\n    var labelAttributeNode = isElement(current) ? current.getAttributeNode(\"aria-labelledby\") : null;\n    // TODO: Do we generally need to block query IdRefs of attributes we have already consulted?\n    var labelElements = labelAttributeNode !== null && !consultedNodes.has(labelAttributeNode) ? queryIdRefs(current, \"aria-labelledby\") : [];\n    if (compute === \"name\" && !context.isReferenced && labelElements.length > 0) {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- Can't be null here otherwise labelElements would be empty\n      consultedNodes.add(labelAttributeNode);\n      return labelElements.map(function (element) {\n        // TODO: Chrome will consider repeated values i.e. use a node multiple times while we'll bail out in computeTextAlternative.\n        return computeTextAlternative(element, {\n          isEmbeddedInLabel: context.isEmbeddedInLabel,\n          isReferenced: true,\n          // this isn't recursion as specified, otherwise we would skip\n          // `aria-label` in\n          // <input id=\"myself\" aria-label=\"foo\" aria-labelledby=\"myself\"\n          recursion: false\n        });\n      }).join(\" \");\n    }\n\n    // 2C\n    // Changed from the spec in anticipation of https://github.com/w3c/accname/issues/64\n    // spec says we should only consider skipping if we have a non-empty label\n    var skipToStep2E = context.recursion && isControl(current) && compute === \"name\";\n    if (!skipToStep2E) {\n      var ariaLabel = (isElement(current) && current.getAttribute(\"aria-label\") || \"\").trim();\n      if (ariaLabel !== \"\" && compute === \"name\") {\n        consultedNodes.add(current);\n        return ariaLabel;\n      }\n\n      // 2D\n      if (!isMarkedPresentational(current)) {\n        var elementTextAlternative = computeElementTextAlternative(current);\n        if (elementTextAlternative !== null) {\n          consultedNodes.add(current);\n          return elementTextAlternative;\n        }\n      }\n    }\n\n    // special casing, cheating to make tests pass\n    // https://github.com/w3c/accname/issues/67\n    if (hasAnyConcreteRoles(current, [\"menu\"])) {\n      consultedNodes.add(current);\n      return \"\";\n    }\n\n    // 2E\n    if (skipToStep2E || context.isEmbeddedInLabel || context.isReferenced) {\n      if (hasAnyConcreteRoles(current, [\"combobox\", \"listbox\"])) {\n        consultedNodes.add(current);\n        var selectedOptions = querySelectedOptions(current);\n        if (selectedOptions.length === 0) {\n          // defined per test `name_heading_combobox`\n          return isHTMLInputElement(current) ? current.value : \"\";\n        }\n        return ArrayFrom(selectedOptions).map(function (selectedOption) {\n          return computeTextAlternative(selectedOption, {\n            isEmbeddedInLabel: context.isEmbeddedInLabel,\n            isReferenced: false,\n            recursion: true\n          });\n        }).join(\" \");\n      }\n      if (hasAbstractRole(current, \"range\")) {\n        consultedNodes.add(current);\n        if (current.hasAttribute(\"aria-valuetext\")) {\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- safe due to hasAttribute guard\n          return current.getAttribute(\"aria-valuetext\");\n        }\n        if (current.hasAttribute(\"aria-valuenow\")) {\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- safe due to hasAttribute guard\n          return current.getAttribute(\"aria-valuenow\");\n        }\n        // Otherwise, use the value as specified by a host language attribute.\n        return current.getAttribute(\"value\") || \"\";\n      }\n      if (hasAnyConcreteRoles(current, [\"textbox\"])) {\n        consultedNodes.add(current);\n        return getValueOfTextbox(current);\n      }\n    }\n\n    // 2F: https://w3c.github.io/accname/#step2F\n    if (allowsNameFromContent(current) || isElement(current) && context.isReferenced || isNativeHostLanguageTextAlternativeElement(current) || isDescendantOfNativeHostLanguageTextAlternativeElement(current)) {\n      var accumulatedText2F = computeMiscTextAlternative(current, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false\n      });\n      if (accumulatedText2F !== \"\") {\n        consultedNodes.add(current);\n        return accumulatedText2F;\n      }\n    }\n    if (current.nodeType === current.TEXT_NODE) {\n      consultedNodes.add(current);\n      return current.textContent || \"\";\n    }\n    if (context.recursion) {\n      consultedNodes.add(current);\n      return computeMiscTextAlternative(current, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false\n      });\n    }\n    var tooltipAttributeValue = computeTooltipAttributeValue(current);\n    if (tooltipAttributeValue !== null) {\n      consultedNodes.add(current);\n      return tooltipAttributeValue;\n    }\n\n    // TODO should this be reachable?\n    consultedNodes.add(current);\n    return \"\";\n  }\n  return asFlatString(computeTextAlternative(root, {\n    isEmbeddedInLabel: false,\n    // by spec computeAccessibleDescription starts with the referenced elements as roots\n    isReferenced: compute === \"description\",\n    recursion: false\n  }));\n}\n//# sourceMappingURL=accessible-name-and-description.mjs.map","map":{"version":3,"names":["ArrayFrom","SetLike","hasAnyConcreteRoles","isElement","isHTMLTableCaptionElement","isHTMLInputElement","isHTMLSelectElement","isHTMLTextAreaElement","safeWindow","isHTMLFieldSetElement","isHTMLLegendElement","isHTMLOptGroupElement","isHTMLTableElement","isHTMLSlotElement","isSVGSVGElement","isSVGTitleElement","queryIdRefs","getLocalName","asFlatString","s","trim","replace","isHidden","node","getComputedStyleImplementation","hasAttribute","getAttribute","style","getPropertyValue","isControl","hasAbstractRole","role","TypeError","concat","querySelectorAllSubtree","element","selectors","elements","querySelectorAll","forEach","root","push","apply","querySelectedOptions","listbox","selectedOptions","isMarkedPresentational","isNativeHostLanguageTextAlternativeElement","allowsNameFromContent","isDescendantOfNativeHostLanguageTextAlternativeElement","getValueOfTextbox","value","textContent","getTextualContent","declaration","content","test","slice","isLabelableElement","localName","findLabelableElement","labelableElement","childNodes","childNode","descendantLabelableElement","getControlOfLabel","label","control","undefined","htmlFor","ownerDocument","getElementById","getLabels","labelsProperty","labels","document","filter","getSlotContents","slot","assignedNodes","length","computeTextAlternative","options","arguments","consultedNodes","window","_options$compute","compute","_options$computedStyl","computedStyleSupportsPseudoElements","getComputedStyle","_options$getComputedS","bind","_options$hidden","hidden","computeMiscTextAlternative","context","accumulatedText","pseudoBefore","beforeContent","child","result","isEmbeddedInLabel","isReferenced","recursion","display","separator","pseudoAfter","afterContent","useAttribute","attributeName","attribute","getAttributeNode","has","add","computeTooltipAttributeValue","computeElementTextAlternative","children","i","_children","_i","_child","_children2","_i2","_child2","nameFromAlt","nameFromLabel","type","nameFromValue","map","join","_nameFromAlt","nameFromTitle","nameFromSubTree","current","labelAttributeNode","labelElements","skipToStep2E","ariaLabel","elementTextAlternative","selectedOption","accumulatedText2F","nodeType","TEXT_NODE","tooltipAttributeValue"],"sources":["C:/Users/drevo/Documents/GitHub/Crafts/TypeScript/Storybook/node_modules/dom-accessibility-api/dist/accessible-name-and-description.mjs"],"sourcesContent":["/**\n * implements https://w3c.github.io/accname/\n */\nimport ArrayFrom from \"./polyfills/array.from.mjs\";\nimport SetLike from \"./polyfills/SetLike.mjs\";\nimport { hasAnyConcreteRoles, isElement, isHTMLTableCaptionElement, isHTMLInputElement, isHTMLSelectElement, isHTMLTextAreaElement, safeWindow, isHTMLFieldSetElement, isHTMLLegendElement, isHTMLOptGroupElement, isHTMLTableElement, isHTMLSlotElement, isSVGSVGElement, isSVGTitleElement, queryIdRefs, getLocalName } from \"./util.mjs\";\n\n/**\n *  A string of characters where all carriage returns, newlines, tabs, and form-feeds are replaced with a single space, and multiple spaces are reduced to a single space. The string contains only character data; it does not contain any markup.\n */\n\n/**\n *\n * @param {string} string -\n * @returns {FlatString} -\n */\nfunction asFlatString(s) {\n  return s.trim().replace(/\\s\\s+/g, \" \");\n}\n\n/**\n *\n * @param node -\n * @param options - These are not optional to prevent accidentally calling it without options in `computeAccessibleName`\n * @returns {boolean} -\n */\nfunction isHidden(node, getComputedStyleImplementation) {\n  if (!isElement(node)) {\n    return false;\n  }\n  if (node.hasAttribute(\"hidden\") || node.getAttribute(\"aria-hidden\") === \"true\") {\n    return true;\n  }\n  var style = getComputedStyleImplementation(node);\n  return style.getPropertyValue(\"display\") === \"none\" || style.getPropertyValue(\"visibility\") === \"hidden\";\n}\n\n/**\n * @param {Node} node -\n * @returns {boolean} - As defined in step 2E of https://w3c.github.io/accname/#mapping_additional_nd_te\n */\nfunction isControl(node) {\n  return hasAnyConcreteRoles(node, [\"button\", \"combobox\", \"listbox\", \"textbox\"]) || hasAbstractRole(node, \"range\");\n}\nfunction hasAbstractRole(node, role) {\n  if (!isElement(node)) {\n    return false;\n  }\n  switch (role) {\n    case \"range\":\n      return hasAnyConcreteRoles(node, [\"meter\", \"progressbar\", \"scrollbar\", \"slider\", \"spinbutton\"]);\n    default:\n      throw new TypeError(\"No knowledge about abstract role '\".concat(role, \"'. This is likely a bug :(\"));\n  }\n}\n\n/**\n * element.querySelectorAll but also considers owned tree\n * @param element\n * @param selectors\n */\nfunction querySelectorAllSubtree(element, selectors) {\n  var elements = ArrayFrom(element.querySelectorAll(selectors));\n  queryIdRefs(element, \"aria-owns\").forEach(function (root) {\n    // babel transpiles this assuming an iterator\n    elements.push.apply(elements, ArrayFrom(root.querySelectorAll(selectors)));\n  });\n  return elements;\n}\nfunction querySelectedOptions(listbox) {\n  if (isHTMLSelectElement(listbox)) {\n    // IE11 polyfill\n    return listbox.selectedOptions || querySelectorAllSubtree(listbox, \"[selected]\");\n  }\n  return querySelectorAllSubtree(listbox, '[aria-selected=\"true\"]');\n}\nfunction isMarkedPresentational(node) {\n  return hasAnyConcreteRoles(node, [\"none\", \"presentation\"]);\n}\n\n/**\n * Elements specifically listed in html-aam\n *\n * We don't need this for `label` or `legend` elements.\n * Their implicit roles already allow \"naming from content\".\n *\n * sources:\n *\n * - https://w3c.github.io/html-aam/#table-element\n */\nfunction isNativeHostLanguageTextAlternativeElement(node) {\n  return isHTMLTableCaptionElement(node);\n}\n\n/**\n * https://w3c.github.io/aria/#namefromcontent\n */\nfunction allowsNameFromContent(node) {\n  return hasAnyConcreteRoles(node, [\"button\", \"cell\", \"checkbox\", \"columnheader\", \"gridcell\", \"heading\", \"label\", \"legend\", \"link\", \"menuitem\", \"menuitemcheckbox\", \"menuitemradio\", \"option\", \"radio\", \"row\", \"rowheader\", \"switch\", \"tab\", \"tooltip\", \"treeitem\"]);\n}\n\n/**\n * TODO https://github.com/eps1lon/dom-accessibility-api/issues/100\n */\nfunction isDescendantOfNativeHostLanguageTextAlternativeElement(\n// eslint-disable-next-line @typescript-eslint/no-unused-vars -- not implemented yet\nnode) {\n  return false;\n}\nfunction getValueOfTextbox(element) {\n  if (isHTMLInputElement(element) || isHTMLTextAreaElement(element)) {\n    return element.value;\n  }\n  // https://github.com/eps1lon/dom-accessibility-api/issues/4\n  return element.textContent || \"\";\n}\nfunction getTextualContent(declaration) {\n  var content = declaration.getPropertyValue(\"content\");\n  if (/^[\"'].*[\"']$/.test(content)) {\n    return content.slice(1, -1);\n  }\n  return \"\";\n}\n\n/**\n * https://html.spec.whatwg.org/multipage/forms.html#category-label\n * TODO: form-associated custom elements\n * @param element\n */\nfunction isLabelableElement(element) {\n  var localName = getLocalName(element);\n  return localName === \"button\" || localName === \"input\" && element.getAttribute(\"type\") !== \"hidden\" || localName === \"meter\" || localName === \"output\" || localName === \"progress\" || localName === \"select\" || localName === \"textarea\";\n}\n\n/**\n * > [...], then the first such descendant in tree order is the label element's labeled control.\n * -- https://html.spec.whatwg.org/multipage/forms.html#labeled-control\n * @param element\n */\nfunction findLabelableElement(element) {\n  if (isLabelableElement(element)) {\n    return element;\n  }\n  var labelableElement = null;\n  element.childNodes.forEach(function (childNode) {\n    if (labelableElement === null && isElement(childNode)) {\n      var descendantLabelableElement = findLabelableElement(childNode);\n      if (descendantLabelableElement !== null) {\n        labelableElement = descendantLabelableElement;\n      }\n    }\n  });\n  return labelableElement;\n}\n\n/**\n * Polyfill of HTMLLabelElement.control\n * https://html.spec.whatwg.org/multipage/forms.html#labeled-control\n * @param label\n */\nfunction getControlOfLabel(label) {\n  if (label.control !== undefined) {\n    return label.control;\n  }\n  var htmlFor = label.getAttribute(\"for\");\n  if (htmlFor !== null) {\n    return label.ownerDocument.getElementById(htmlFor);\n  }\n  return findLabelableElement(label);\n}\n\n/**\n * Polyfill of HTMLInputElement.labels\n * https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/labels\n * @param element\n */\nfunction getLabels(element) {\n  var labelsProperty = element.labels;\n  if (labelsProperty === null) {\n    return labelsProperty;\n  }\n  if (labelsProperty !== undefined) {\n    return ArrayFrom(labelsProperty);\n  }\n\n  // polyfill\n  if (!isLabelableElement(element)) {\n    return null;\n  }\n  var document = element.ownerDocument;\n  return ArrayFrom(document.querySelectorAll(\"label\")).filter(function (label) {\n    return getControlOfLabel(label) === element;\n  });\n}\n\n/**\n * Gets the contents of a slot used for computing the accname\n * @param slot\n */\nfunction getSlotContents(slot) {\n  // Computing the accessible name for elements containing slots is not\n  // currently defined in the spec. This implementation reflects the\n  // behavior of NVDA 2020.2/Firefox 81 and iOS VoiceOver/Safari 13.6.\n  var assignedNodes = slot.assignedNodes();\n  if (assignedNodes.length === 0) {\n    // if no nodes are assigned to the slot, it displays the default content\n    return ArrayFrom(slot.childNodes);\n  }\n  return assignedNodes;\n}\n\n/**\n * implements https://w3c.github.io/accname/#mapping_additional_nd_te\n * @param root\n * @param options\n * @returns\n */\nexport function computeTextAlternative(root) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var consultedNodes = new SetLike();\n  var window = safeWindow(root);\n  var _options$compute = options.compute,\n    compute = _options$compute === void 0 ? \"name\" : _options$compute,\n    _options$computedStyl = options.computedStyleSupportsPseudoElements,\n    computedStyleSupportsPseudoElements = _options$computedStyl === void 0 ? options.getComputedStyle !== undefined : _options$computedStyl,\n    _options$getComputedS = options.getComputedStyle,\n    getComputedStyle = _options$getComputedS === void 0 ? window.getComputedStyle.bind(window) : _options$getComputedS,\n    _options$hidden = options.hidden,\n    hidden = _options$hidden === void 0 ? false : _options$hidden;\n\n  // 2F.i\n  function computeMiscTextAlternative(node, context) {\n    var accumulatedText = \"\";\n    if (isElement(node) && computedStyleSupportsPseudoElements) {\n      var pseudoBefore = getComputedStyle(node, \"::before\");\n      var beforeContent = getTextualContent(pseudoBefore);\n      accumulatedText = \"\".concat(beforeContent, \" \").concat(accumulatedText);\n    }\n\n    // FIXME: Including aria-owns is not defined in the spec\n    // But it is required in the web-platform-test\n    var childNodes = isHTMLSlotElement(node) ? getSlotContents(node) : ArrayFrom(node.childNodes).concat(queryIdRefs(node, \"aria-owns\"));\n    childNodes.forEach(function (child) {\n      var result = computeTextAlternative(child, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false,\n        recursion: true\n      });\n      // TODO: Unclear why display affects delimiter\n      // see https://github.com/w3c/accname/issues/3\n      var display = isElement(child) ? getComputedStyle(child).getPropertyValue(\"display\") : \"inline\";\n      var separator = display !== \"inline\" ? \" \" : \"\";\n      // trailing separator for wpt tests\n      accumulatedText += \"\".concat(separator).concat(result).concat(separator);\n    });\n    if (isElement(node) && computedStyleSupportsPseudoElements) {\n      var pseudoAfter = getComputedStyle(node, \"::after\");\n      var afterContent = getTextualContent(pseudoAfter);\n      accumulatedText = \"\".concat(accumulatedText, \" \").concat(afterContent);\n    }\n    return accumulatedText.trim();\n  }\n\n  /**\n   *\n   * @param element\n   * @param attributeName\n   * @returns A string non-empty string or `null`\n   */\n  function useAttribute(element, attributeName) {\n    var attribute = element.getAttributeNode(attributeName);\n    if (attribute !== null && !consultedNodes.has(attribute) && attribute.value.trim() !== \"\") {\n      consultedNodes.add(attribute);\n      return attribute.value;\n    }\n    return null;\n  }\n  function computeTooltipAttributeValue(node) {\n    if (!isElement(node)) {\n      return null;\n    }\n    return useAttribute(node, \"title\");\n  }\n  function computeElementTextAlternative(node) {\n    if (!isElement(node)) {\n      return null;\n    }\n\n    // https://w3c.github.io/html-aam/#fieldset-and-legend-elements\n    if (isHTMLFieldSetElement(node)) {\n      consultedNodes.add(node);\n      var children = ArrayFrom(node.childNodes);\n      for (var i = 0; i < children.length; i += 1) {\n        var child = children[i];\n        if (isHTMLLegendElement(child)) {\n          return computeTextAlternative(child, {\n            isEmbeddedInLabel: false,\n            isReferenced: false,\n            recursion: false\n          });\n        }\n      }\n    } else if (isHTMLTableElement(node)) {\n      // https://w3c.github.io/html-aam/#table-element\n      consultedNodes.add(node);\n      var _children = ArrayFrom(node.childNodes);\n      for (var _i = 0; _i < _children.length; _i += 1) {\n        var _child = _children[_i];\n        if (isHTMLTableCaptionElement(_child)) {\n          return computeTextAlternative(_child, {\n            isEmbeddedInLabel: false,\n            isReferenced: false,\n            recursion: false\n          });\n        }\n      }\n    } else if (isSVGSVGElement(node)) {\n      // https://www.w3.org/TR/svg-aam-1.0/\n      consultedNodes.add(node);\n      var _children2 = ArrayFrom(node.childNodes);\n      for (var _i2 = 0; _i2 < _children2.length; _i2 += 1) {\n        var _child2 = _children2[_i2];\n        if (isSVGTitleElement(_child2)) {\n          return _child2.textContent;\n        }\n      }\n      return null;\n    } else if (getLocalName(node) === \"img\" || getLocalName(node) === \"area\") {\n      // https://w3c.github.io/html-aam/#area-element\n      // https://w3c.github.io/html-aam/#img-element\n      var nameFromAlt = useAttribute(node, \"alt\");\n      if (nameFromAlt !== null) {\n        return nameFromAlt;\n      }\n    } else if (isHTMLOptGroupElement(node)) {\n      var nameFromLabel = useAttribute(node, \"label\");\n      if (nameFromLabel !== null) {\n        return nameFromLabel;\n      }\n    }\n    if (isHTMLInputElement(node) && (node.type === \"button\" || node.type === \"submit\" || node.type === \"reset\")) {\n      // https://w3c.github.io/html-aam/#input-type-text-input-type-password-input-type-search-input-type-tel-input-type-email-input-type-url-and-textarea-element-accessible-description-computation\n      var nameFromValue = useAttribute(node, \"value\");\n      if (nameFromValue !== null) {\n        return nameFromValue;\n      }\n\n      // TODO: l10n\n      if (node.type === \"submit\") {\n        return \"Submit\";\n      }\n      // TODO: l10n\n      if (node.type === \"reset\") {\n        return \"Reset\";\n      }\n    }\n    var labels = getLabels(node);\n    if (labels !== null && labels.length !== 0) {\n      consultedNodes.add(node);\n      return ArrayFrom(labels).map(function (element) {\n        return computeTextAlternative(element, {\n          isEmbeddedInLabel: true,\n          isReferenced: false,\n          recursion: true\n        });\n      }).filter(function (label) {\n        return label.length > 0;\n      }).join(\" \");\n    }\n\n    // https://w3c.github.io/html-aam/#input-type-image-accessible-name-computation\n    // TODO: wpt test consider label elements but html-aam does not mention them\n    // We follow existing implementations over spec\n    if (isHTMLInputElement(node) && node.type === \"image\") {\n      var _nameFromAlt = useAttribute(node, \"alt\");\n      if (_nameFromAlt !== null) {\n        return _nameFromAlt;\n      }\n      var nameFromTitle = useAttribute(node, \"title\");\n      if (nameFromTitle !== null) {\n        return nameFromTitle;\n      }\n\n      // TODO: l10n\n      return \"Submit Query\";\n    }\n    if (hasAnyConcreteRoles(node, [\"button\"])) {\n      // https://www.w3.org/TR/html-aam-1.0/#button-element\n      var nameFromSubTree = computeMiscTextAlternative(node, {\n        isEmbeddedInLabel: false,\n        isReferenced: false\n      });\n      if (nameFromSubTree !== \"\") {\n        return nameFromSubTree;\n      }\n    }\n    return null;\n  }\n  function computeTextAlternative(current, context) {\n    if (consultedNodes.has(current)) {\n      return \"\";\n    }\n\n    // 2A\n    if (!hidden && isHidden(current, getComputedStyle) && !context.isReferenced) {\n      consultedNodes.add(current);\n      return \"\";\n    }\n\n    // 2B\n    var labelAttributeNode = isElement(current) ? current.getAttributeNode(\"aria-labelledby\") : null;\n    // TODO: Do we generally need to block query IdRefs of attributes we have already consulted?\n    var labelElements = labelAttributeNode !== null && !consultedNodes.has(labelAttributeNode) ? queryIdRefs(current, \"aria-labelledby\") : [];\n    if (compute === \"name\" && !context.isReferenced && labelElements.length > 0) {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- Can't be null here otherwise labelElements would be empty\n      consultedNodes.add(labelAttributeNode);\n      return labelElements.map(function (element) {\n        // TODO: Chrome will consider repeated values i.e. use a node multiple times while we'll bail out in computeTextAlternative.\n        return computeTextAlternative(element, {\n          isEmbeddedInLabel: context.isEmbeddedInLabel,\n          isReferenced: true,\n          // this isn't recursion as specified, otherwise we would skip\n          // `aria-label` in\n          // <input id=\"myself\" aria-label=\"foo\" aria-labelledby=\"myself\"\n          recursion: false\n        });\n      }).join(\" \");\n    }\n\n    // 2C\n    // Changed from the spec in anticipation of https://github.com/w3c/accname/issues/64\n    // spec says we should only consider skipping if we have a non-empty label\n    var skipToStep2E = context.recursion && isControl(current) && compute === \"name\";\n    if (!skipToStep2E) {\n      var ariaLabel = (isElement(current) && current.getAttribute(\"aria-label\") || \"\").trim();\n      if (ariaLabel !== \"\" && compute === \"name\") {\n        consultedNodes.add(current);\n        return ariaLabel;\n      }\n\n      // 2D\n      if (!isMarkedPresentational(current)) {\n        var elementTextAlternative = computeElementTextAlternative(current);\n        if (elementTextAlternative !== null) {\n          consultedNodes.add(current);\n          return elementTextAlternative;\n        }\n      }\n    }\n\n    // special casing, cheating to make tests pass\n    // https://github.com/w3c/accname/issues/67\n    if (hasAnyConcreteRoles(current, [\"menu\"])) {\n      consultedNodes.add(current);\n      return \"\";\n    }\n\n    // 2E\n    if (skipToStep2E || context.isEmbeddedInLabel || context.isReferenced) {\n      if (hasAnyConcreteRoles(current, [\"combobox\", \"listbox\"])) {\n        consultedNodes.add(current);\n        var selectedOptions = querySelectedOptions(current);\n        if (selectedOptions.length === 0) {\n          // defined per test `name_heading_combobox`\n          return isHTMLInputElement(current) ? current.value : \"\";\n        }\n        return ArrayFrom(selectedOptions).map(function (selectedOption) {\n          return computeTextAlternative(selectedOption, {\n            isEmbeddedInLabel: context.isEmbeddedInLabel,\n            isReferenced: false,\n            recursion: true\n          });\n        }).join(\" \");\n      }\n      if (hasAbstractRole(current, \"range\")) {\n        consultedNodes.add(current);\n        if (current.hasAttribute(\"aria-valuetext\")) {\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- safe due to hasAttribute guard\n          return current.getAttribute(\"aria-valuetext\");\n        }\n        if (current.hasAttribute(\"aria-valuenow\")) {\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- safe due to hasAttribute guard\n          return current.getAttribute(\"aria-valuenow\");\n        }\n        // Otherwise, use the value as specified by a host language attribute.\n        return current.getAttribute(\"value\") || \"\";\n      }\n      if (hasAnyConcreteRoles(current, [\"textbox\"])) {\n        consultedNodes.add(current);\n        return getValueOfTextbox(current);\n      }\n    }\n\n    // 2F: https://w3c.github.io/accname/#step2F\n    if (allowsNameFromContent(current) || isElement(current) && context.isReferenced || isNativeHostLanguageTextAlternativeElement(current) || isDescendantOfNativeHostLanguageTextAlternativeElement(current)) {\n      var accumulatedText2F = computeMiscTextAlternative(current, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false\n      });\n      if (accumulatedText2F !== \"\") {\n        consultedNodes.add(current);\n        return accumulatedText2F;\n      }\n    }\n    if (current.nodeType === current.TEXT_NODE) {\n      consultedNodes.add(current);\n      return current.textContent || \"\";\n    }\n    if (context.recursion) {\n      consultedNodes.add(current);\n      return computeMiscTextAlternative(current, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false\n      });\n    }\n    var tooltipAttributeValue = computeTooltipAttributeValue(current);\n    if (tooltipAttributeValue !== null) {\n      consultedNodes.add(current);\n      return tooltipAttributeValue;\n    }\n\n    // TODO should this be reachable?\n    consultedNodes.add(current);\n    return \"\";\n  }\n  return asFlatString(computeTextAlternative(root, {\n    isEmbeddedInLabel: false,\n    // by spec computeAccessibleDescription starts with the referenced elements as roots\n    isReferenced: compute === \"description\",\n    recursion: false\n  }));\n}\n//# sourceMappingURL=accessible-name-and-description.mjs.map"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}